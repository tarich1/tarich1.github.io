<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set Largest Numeric Version</title>
</head>
<body>
    <a id="last" href="#">Placeholder</a>
    <script>
        // JSONを取得し処理する関数
        async function fetchAndProcessJSON() {
            try {
                const response = await fetch("https://piston-meta.mojang.com/mc/game/version_manifest_v2.json");
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const jsonData = await response.json();

                // 最大の数値IDを取得する
                const largestVersion = findLargestVersionId(jsonData.versions);

                // 最も大きなバージョン番号をaタグに設定
                const lastLink = document.getElementById('last');
                lastLink.textContent = largestVersion;
                lastLink.href = `#${largestVersion}`; // 必要に応じてリンク先を変更可能
            } catch (error) {
                console.error("Error fetching or processing JSON:", error);
            }
        }

        // バージョン番号形式をフィルタして最大の値を取得する関数
        function findLargestVersionId(versions) {
            // バージョン番号形式のみにフィルタリング
            const versionIds = versions
                .map(version => version.id)
                .filter(id => /^\d+(\.\d+)*$/.test(id)); // バージョン番号形式のみを取得

            // バージョン番号を比較して最大値を選ぶ
            return versionIds.reduce((largest, current) => {
                const largestParts = largest.split('.').map(Number);
                const currentParts = current.split('.').map(Number);

                for (let i = 0; i < Math.max(largestParts.length, currentParts.length); i++) {
                    const a = largestParts[i] || 0;
                    const b = currentParts[i] || 0;
                    if (a !== b) return a > b ? largest : current;
                }
                return largest;
            }, "0.0.0"); // 初期値を適当に設定
        }

        // メイン処理を呼び出す
        fetchAndProcessJSON();
    </script>
</body>
</html>
